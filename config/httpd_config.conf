# OpenLiteSpeed Configuration generated by OLS cPanel v2.0.0
# Generated on: {{GENERATION_DATE}}
# Server: {{SERVER_NAME}}

serverName {{SERVER_NAME}}
user {{SERVER_USER}}
group {{SERVER_GROUP}}
priority 0
autoRestart 1
chrootPath /
enableChroot 0
inMemBufSize 60M
swappingDir /tmp/lshttpd/swap
autoFix503 1
gracefulRestartTimeout 300
mime conf/mime.properties
showVersionNumber 0
adminEmails {{ADMIN_EMAIL}}
indexFiles index.html, index.php, index.htm, home.html, home.htm
disableWebAdmin 0
useIpInProxyHeader 0
adminRoot ${SERVER_ROOT}/admin/
logDebugHeaders 0

errorlog logs/error.log {
    logLevel {{LOG_LEVEL}}
    debugLevel 0
    rollingSize {{MAX_LOG_SIZE}}M
    enableStderrLog 1
    keepDays {{LOG_RETENTION_DAYS}}
    compressArchive 1
}

accessLog logs/access.log {
    rollingSize {{MAX_LOG_SIZE}}M
    keepDays {{LOG_RETENTION_DAYS}}
    compressArchive 1
    logReferer 1
    logUserAgent 1
    logHandler 1
    overwriteLog 0
}

expires {
    enableExpires 1
    expiresByType image/*=A604800,text/css=A604800,application/x-javascript=A604800,application/javascript=A604800,font/*=A604800,application/x-font-ttf=A604800,application/font-woff=A604800,application/font-woff2=A604800
}

tuning {
    maxConnections {{MAX_CONNECTIONS}}
    maxSSLConnections {{MAX_SSL_CONNECTIONS}}
    connTimeout 300
    maxKeepAliveReq {{MAX_KEEP_ALIVE_REQUESTS}}
    smartKeepAlive 0
    keepAliveTimeout {{KEEP_ALIVE_TIMEOUT}}
    sndBufSize 0
    rcvBufSize 0
    gzipStaticCompressLevel {{GZIP_LEVEL}}
    gzipMaxFileSize 10M
    eventDispatcher best
    maxCachedFileSize 4096
    totalInMemCacheSize {{TOTAL_MEMORY_CACHE}}M
    maxMMapFileSize 256K
    totalMMapCacheSize 40M
    useSendfile 1
    fileETag 28
    SSLCryptoDevice null
    maxReqURLLen 32768
    maxReqHeaderSize 65536
    maxReqBodySize {{MAX_REQUEST_BODY_SIZE}}M
    maxDynRespHeaderSize 32768
    maxDynRespSize {{MAX_RESPONSE_SIZE}}M
    enableGzipCompress {{GZIP_ENABLED}}
    enableBrCompress 4
    enableDynGzipCompress 1
    gzipCompressLevel {{GZIP_LEVEL}}
    brStaticCompressLevel 6
    compressibleTypes default
    gzipAutoUpdateStatic 1
    gzipMinFileSize 300
    quicEnable {{QUIC_ENABLED}}
    quicShmDir /dev/shm
}

accessDenyDir {
    dir /
    dir /etc/*
    dir /dev/*
    dir conf/*
    dir admin/conf/*
}

fileAccessControl {
    followSymbolLink 1
    checkSymbolLink 0
    requiredPermissionMask 000
    restrictedPermissionMask 000
}

perClientConnLimit {
    staticReqPerSec {{STATIC_REQUESTS_PER_SEC}}
    dynReqPerSec {{DYNAMIC_REQUESTS_PER_SEC}}
    outBandwidth 0
    inBandwidth 0
    softLimit {{SOFT_CONNECTION_LIMIT}}
    hardLimit {{HARD_CONNECTION_LIMIT}}
    gracePeriod 15
    banPeriod {{BAN_PERIOD}}
}

CGIRLimit {
    maxCGIInstances {{MAX_CGI_INSTANCES}}
    minUID 11
    minGID 10
    priority 0
    CPUSoftLimit {{CPU_SOFT_LIMIT}}
    CPUHardLimit {{CPU_HARD_LIMIT}}
    memSoftLimit {{MEMORY_SOFT_LIMIT}}
    memHardLimit {{MEMORY_HARD_LIMIT}}
    procSoftLimit {{PROCESS_SOFT_LIMIT}}
    procHardLimit {{PROCESS_HARD_LIMIT}}
}

accessControl {
    allow ALL
    deny
}

wsgiDefaults {
    binPath
    railsEnv 1
    maxConns 5
    env LSAPI_MAX_IDLE=60
    initTimeout 60
    retryTimeout 0
    pcKeepAliveTimeout 60
    respBuffer 0
    backlog 50
    runOnStartUp 3
    extMaxIdleTime 300
    priority 3
    memSoftLimit 2047M
    memHardLimit 2047M
    procSoftLimit 500
    procHardLimit 600
}

nodeDefaults {
    binPath
    railsEnv 1
    maxConns 5
    env LSAPI_MAX_IDLE=60
    initTimeout 60
    retryTimeout 0
    pcKeepAliveTimeout 60
    respBuffer 0
    backlog 50
    runOnStartUp 3
    extMaxIdleTime 300
    priority 3
    memSoftLimit 2047M
    memHardLimit 2047M
    procSoftLimit 500
    procHardLimit 600
}

module cache {
    ls_enabled 1
    checkPrivateCache 1
    checkPublicCache 1
    maxCacheObjSize 10000000
    maxStaleAge 200
    qsCache 1
    reqCookieCache 1
    respCookieCache 1
    ignoreReqCacheCtrl 1
    ignoreRespCacheCtrl 0
    enableCache {{CACHE_ENABLED}}
    expireInSeconds {{CACHE_EXPIRE_SECONDS}}
    enablePrivateCache {{PRIVATE_CACHE_ENABLED}}
    privateExpireInSeconds {{PRIVATE_CACHE_EXPIRE_SECONDS}}
    storagePath /tmp/lshttpd/cache/
}

module mod_security {
    ls_enabled {{MODSECURITY_ENABLED}}
    secRuleEngine {{MODSECURITY_ENGINE}}
    secRequestBodyAccess On
    secResponseBodyAccess Off
    secRequestBodyLimit 13107200
    secRequestBodyNoFilesLimit 131072
    secRequestBodyInMemoryLimit 131072
    secRequestBodyLimitAction ProcessPartial
    secPcreMatchLimit 1000
    secPcreMatchLimitRecursion 1000
    secDebugLog /var/log/ols-cpanel/modsec_debug.log
    secDebugLogLevel 0
    secAuditEngine RelevantOnly
    secAuditLogRelevantStatus "^(?:5|4(?!04))"
    secAuditLogParts ABIJDEFHZ
    secAuditLogType Serial
    secAuditLog /var/log/ols-cpanel/modsec_audit.log
    secAuditStorageDir /var/log/ols-cpanel/audit/
    secAuditLogMaxFileSize 1048576
    secAuditLogBackupLogs On
    secSensorID OLS_CPANEL_001
    secRemoteRulesFailAction Fatal
    secAction "id:900130,phase:1,nolog,pass,t:none,setvar:tx.critical_anomaly_score=5,setvar:tx.anomaly_score=+%{tx.critical_anomaly_score}"
}

{{LISTENERS}}

{{VIRTUAL_HOSTS}}

{{PHP_HANDLERS}}

# DO NOT MODIFY BELOW THIS LINE
# Configuration is automatically generated by OLS cPanel
# Manual changes will be overwritten

# End of configuration file
